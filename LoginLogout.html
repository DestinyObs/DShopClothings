<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://use.fontawesome.com/8e4379dc54.js"></script>
    <link rel="stylesheet" href="font-awesome/css/font-awesome.css">
    <title>DShop Account Login</title>

    <link rel="icon" type="image/png" href="img/logoC.png">
    <link rel="stylesheet" href="Style.css">
    
</head>


<body>
    <div class="container ccontainer">
        <div class="forms-container">
            <div class="signin-signup">
        <div class="offcanvas__close">+</div>

                <form action="" class="sign-in-form">
                  <div class="header__logo">
                    <a href="./index.html"><img style="height: 64px;" src="img/logoC.png" alt=""></a>
                </div>

                    <h4 class="title" style="font-size: 20px; text-align: center;" id="one">Welcome to DShop</h4>
                    <p style="font-size: 13px; text-align: center;">Type your e-mail and password to log in to your DShop account.</p>
                    <div class="input-field">
                        <i class="fa fa-user"></i>
                        <input type="text" placeholder="E-mail">
                    </div>

                    <div class="input-field">
                        <i class="fa fa-lock "></i>
                        <input type="password" placeholder="Password">
                    </div>
                    <a href="#" id="forgot-password-link" style="text-decoration: none; color: black;">Forgot Password</a>
                    <input type="submit" value="Login" class="btn solid">
                   
                </form>

                <form id="target-section1" action="https://localhost:7259/api/User/register" method="POST" class="sign-up-form">
                    <h2 class="title">Sign Up</h2>
                    <div class="input-field">
                      <i class="fa fa-user"></i>
                      <input type="text" placeholder="Username" name="username" required>
                    </div>
                  
                    <div class="input-field">
                      <i class="fa fa-envelope"></i>
                      <input type="email" placeholder="Email" name="email" required>
                    </div>
                  
                    <div class="input-field">
                      <i class="fa fa-phone"></i>
                      <input type="text" placeholder="Phone Number" name="phoneNumber" required>
                    </div>
                    <div class="input-field">
                      <i class="fa fa-lock"></i>
                      <input type="password" placeholder="Password" name="password" required>
                    </div>
                  
                    <div class="input-field">
                      <i class="fa fa-lock"></i>
                      <input type="password" placeholder="Confirm Password" name="confirmPassword" required>
                    </div>
                    <input type="submit" value="Sign Up" class="btn solid">

                  </form>
            </div>
        </div>

        <div class="panel-container">
            <div class="panel left-panel">
                <div class="content">
                    <h3>New Here ?</h3>
                    <p>To Enjoy Free access to our services you will be required to sign-up, for you to have access to everything we can offer !!!
                    </p>
                        <button class="btn transparent" id="sign-up-btn">Sign Up</button>
                </div>
                <img src="signin.svg" class="image" alt="">
            </div>

            <div class="panel right-panel">
                <div class="content">
                    <h3>One Of Us ?</h3>
                    <p>Please sign-in to access our services pour unlimited services  </p>
                        <button class="btn transparent" id="sign-in-btn">Sign In</button>
                </div>
                <img src="signup.svg" class="image" alt="">
            </div>
        </div>
    </div>

<footer>
    <div class="row">

    </div>
</footer>
<script>
// Get the forgot password link and the forgot password popup form
const forgotPasswordLink = document.getElementById('forgot-password-link');
        const forgotPasswordPopup = document.getElementById('forgot-password-popup');

        // Add an event listener to the forgot password link
        forgotPasswordLink.addEventListener('click', (e) => {
            e.preventDefault(); // Prevent the default link behavior
            forgotPasswordPopup.style.display = 'block'; // Display the forgot password popup form
        });

        // Get the forgot password form and input field
        const forgotPasswordForm = document.querySelector('.forgot-password-form');
        forgotPasswordForm.querySelector('input[name="email"]');

        // Add an event listener to the forgot password form submit event
        forgotPasswordForm.addEventListener('submit', (e) => {
            e.preventDefault(); // Prevent the form from submitting

            // Retrieve the email entered by the user
            const email = emailInput.value;

            // Perform the necessary actions for resetting the password
            // For example, send a password reset email to the provided email address

            // Display a success message or redirect the user to a confirmation page
            alert('Password reset email sent to ' + email);

            // Reset the form and close the popup
            forgotPasswordForm.reset();
            forgotPasswordPopup.style.display = 'none';
        });


    // Get the form element and input fields
const signUpForm = document.querySelector('.sign-up-form');
const userNameInput = signUpForm.querySelector('input[name="username"]');
const emailInput = signUpForm.querySelector('input[name="email"]');
const phoneNumberInput = signUpForm.querySelector('input[name="phoneNumber"]');
const passwordInput = signUpForm.querySelector('input[name="password"]');
const confirmPasswordInput = signUpForm.querySelector('input[name="confirmPassword"]');

// Add an event listener to the form submit event
signUpForm.addEventListener('submit', (e) => {
  e.preventDefault(); // Prevent the form from submitting

  // Create an object with the user data
  const userData = {
    userName: userNameInput.value,
    email: emailInput.value,
    phoneNumber: phoneNumberInput.value,
    password: passwordInput.value,
    confirmPassword: confirmPasswordInput.value
  };

  // Make the API request
  fetch("https://localhost:7259/api/User/register", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(userData),
  })
    .then(response => {
      if (response.ok) {
        // Redirect to the verification page
        window.location.href = "/verifyme.html?status=emailsent";
      } else {
        // Handle the error response
        // You can display an error message or take any other appropriate action
        console.error("Registration failed:", response.statusText);
      }
    })
    .catch(error => {
      console.error("Registration failed:", error);
    });
});

// Get the checkbox element
const rememberMeCheckbox = document.getElementById('rememberMe');

// Retrieve the stored email and password from local storage
const storedEmail = localStorage.getItem('rememberedEmail');
const storedPassword = localStorage.getItem('rememberedPassword');

// Fill the email and password fields if they are stored
if (storedEmail && storedPassword) {
  emailInput.value = storedEmail;
  passwordInput.value = storedPassword;
}

// Add event listener to checkbox
rememberMeCheckbox.addEventListener('change', function() {
  if (this.checked) {
    // Save the email and password to local storage
    localStorage.setItem('rememberedEmail', emailInput.value);
    localStorage.setItem('rememberedPassword', passwordInput.value);
  } else {
    // Clear the stored email and password
    localStorage.removeItem('rememberedEmail');
    localStorage.removeItem('rememberedPassword');
  }
});

</script>
    <script src="app.js"></script>
</body>
</html>